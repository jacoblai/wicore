# WiCore HMTæ¨ç†å¼•æ“ - ç”Ÿäº§ç¯å¢ƒé…ç½®
# æ”¯æŒåƒäº¿æ¨¡å‹å•å¡éƒ¨ç½²ä¸128Kä¸Šä¸‹æ–‡ï¼Œé›†æˆ2024-2025æœ€æ–°å†…å­˜ä¼˜åŒ–æŠ€æœ¯

# æœåŠ¡å™¨é…ç½®
server:
  host: "0.0.0.0"
  port: 8000
  workers: 1

# æ¨¡å‹é…ç½®
model:
  model_path: "models/Qwen2.5-7B-Instruct"
  model_type: "qwen"
  device_map: "cuda:0"
  torch_dtype: "float16"
  max_tokens: 2048
  temperature: 0.7
  top_p: 0.9
  top_k: 50
  max_batch_size: 4
  trust_remote_code: true

# HMTå†…å­˜ç®¡ç†ï¼ˆå®Œæ•´éªŒè¯ç‰ˆæœ¬ï¼‰
hmt:
  enable_hmt: true
  
  # ğŸ§  1. åˆ†å±‚å†…å­˜ç®¡ç† (GPUâ†’CPUâ†’NVMe)
  memory_pools:
    gpu:
      initial_size_gb: 8.0
      max_size_gb: 14.0
      growth_factor: 1.5
    cpu:
      initial_size_gb: 4.0
      max_size_gb: 8.0
      growth_factor: 1.2
    nvme:
      initial_size_gb: 2.0
      max_size_gb: 16.0
      growth_factor: 1.0
  
  # ğŸ”„ 2. MiniKV: 2ä½é‡åŒ–KVç¼“å­˜
  enable_minikv: true
  minikv_quantization_bits: 2
  minikv_compression_ratio: 0.25
  
  # ğŸ—ï¸ 3. LaCache: é˜¶æ¢¯å½¢ç¼“å­˜ç»“æ„
  enable_lacache: true
  lacache_levels: 3
  lacache_l1_size_mb: 512
  lacache_l2_size_mb: 2048
  lacache_l3_size_mb: 8192
  
  # ğŸ¯ 4. HeadInfer: å¤´çº§åˆ«offloading
  enable_head_offload: true
  head_offload_ratio: 0.3
  head_offload_threshold_mb: 1024
  
  # ğŸµ 5. SYMPHONY: å¤šè½®äº¤äº’ä¼˜åŒ–
  enable_symphony: true
  symphony_window_size: 8
  symphony_cache_size_mb: 1024
  symphony_prefetch_rounds: 3
  
  # ğŸ“¦ 6. vTensor: GPUè™šæ‹Ÿå†…å­˜ç®¡ç†
  enable_vtensor: true
  vtensor_page_size_mb: 64
  vtensor_swap_threshold: 0.8
  vtensor_prefetch_pages: 4
  
  # ğŸ§© 7. Jenga: å¼‚æ„åµŒå…¥å†…å­˜åˆ†é…
  enable_jenga: true
  jenga_embedding_cache_mb: 512
  jenga_allocation_strategy: "heterogeneous"
  jenga_gpu_embedding_ratio: 0.7
  
  # ğŸ’¾ ç¼“å­˜ç­–ç•¥
  cache_strategy: "lacache"
  max_cache_entries: 2048
  cache_warmup_enabled: true
  
  # âš¡ é¢„å–è®¾ç½®
  enable_prefetch: true
  prefetch_size: 4
  prefetch_threads: 2
  
  # ğŸ“Š å†…å­˜ç›‘æ§å’Œä¼˜åŒ–
  memory_monitoring_interval_ms: 100
  auto_memory_optimization: true
  memory_pressure_threshold: 0.85
  emergency_offload_threshold: 0.95
  
  # ğŸ”§ çº¿ç¨‹æ± é…ç½®
  memory_pool_threads: 4
  offload_threads: 2
  
  # ğŸ“ˆ æ€§èƒ½è°ƒä¼˜
  enable_async_offload: true
  enable_memory_prefusion: true
  enable_gradient_checkpointing: true

# MoRè·¯ç”±ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
mor:
  enable_mor: false

# æ€§èƒ½ç›‘æ§
performance:
  enable_monitoring: true
  
# æ³¨æ„åŠ›æœºåˆ¶
attention:
  enable_kv_cache: true