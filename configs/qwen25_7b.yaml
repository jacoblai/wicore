# WiCoreé…ç½® - Qwen2.5-7B ç®€åŒ–ç‰ˆæœ¬
# å•GPUéƒ¨ç½²ï¼Œæ”¯æŒ16GBæ˜¾å­˜

# æœåŠ¡å™¨é…ç½®
server:
  host: "0.0.0.0"
  port: 8000
  workers: 1
  max_concurrent_requests: 16
  request_timeout: 300.0
  enable_cors: true

# æ¨¡å‹é…ç½®
model:
  # Qwen2.5-7Bæ¨¡å‹è·¯å¾„ - è¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹
  model_path: "models/Qwen2.5-7B-Instruct"
  model_type: "qwen"
  
  # å•GPUè®¾ç½®
  device_map: "cuda:0"
  torch_dtype: "float16"
  
  # ç”Ÿæˆå‚æ•°
  max_tokens: 2048
  temperature: 0.7
  top_p: 0.9
  top_k: 50
  
  # æ‰¹å¤„ç†
  max_batch_size: 4
  
  # æ¨¡å‹åŠ è½½é…ç½®
  trust_remote_code: true
  low_cpu_mem_usage: true
  use_safetensors: true

# HMTå†…å­˜ç®¡ç†ï¼ˆå®Œæ•´éªŒè¯ç‰ˆæœ¬ï¼‰
hmt:
  enable_hmt: true
  
  # ğŸ§  1. åˆ†å±‚å†…å­˜ç®¡ç† (GPUâ†’CPUâ†’NVMe)
  memory_pools:
    gpu:
      initial_size_gb: 8.0
      max_size_gb: 14.0  # ä¸º16GB GPUä¿ç•™ä¸€äº›å†…å­˜
      growth_factor: 1.5
    
    cpu:
      initial_size_gb: 4.0
      max_size_gb: 8.0
      growth_factor: 1.2
      
    nvme:
      initial_size_gb: 2.0
      max_size_gb: 16.0
      growth_factor: 1.0
  
  # ğŸ”„ 2. MiniKV: 2ä½é‡åŒ–KVç¼“å­˜ (ArXiv 2411.18077)
  enable_minikv: true
  minikv_quantization_bits: 2
  minikv_compression_ratio: 0.25
  
  # ğŸ—ï¸ 3. LaCache: é˜¶æ¢¯å½¢ç¼“å­˜ç»“æ„ (ArXiv 2507.14204)
  enable_lacache: true
  lacache_levels: 3
  lacache_l1_size_mb: 512  # GPU HBM
  lacache_l2_size_mb: 2048 # CPU DRAM
  lacache_l3_size_mb: 8192 # NVMe SSD
  
  # ğŸ¯ 4. HeadInfer: å¤´çº§åˆ«KVç¼“å­˜offloading (ArXiv 2502.12574)
  enable_head_offload: true
  head_offload_ratio: 0.3  # 30%çš„å¤´æ”¾åœ¨CPU
  head_offload_threshold_mb: 1024
  
  # ğŸµ 5. SYMPHONY: å¤šè½®äº¤äº’ä¼˜åŒ– (ArXiv 2412.16434)
  enable_symphony: true
  symphony_window_size: 8
  symphony_cache_size_mb: 1024
  symphony_prefetch_rounds: 3
  
  # ğŸ“¦ 6. vTensor: GPUè™šæ‹Ÿå†…å­˜ç®¡ç† (ArXiv 2407.15309)
  enable_vtensor: true
  vtensor_page_size_mb: 64
  vtensor_swap_threshold: 0.8
  vtensor_prefetch_pages: 4
  
  # ğŸ§© 7. Jenga: å¼‚æ„åµŒå…¥å†…å­˜åˆ†é… (ArXiv 2503.18292)
  enable_jenga: true
  jenga_embedding_cache_mb: 512
  jenga_allocation_strategy: "heterogeneous"
  jenga_gpu_embedding_ratio: 0.7
  
  # ğŸ’¾ ç¼“å­˜ç­–ç•¥
  cache_strategy: "lacache"  # ä½¿ç”¨LaCacheç­–ç•¥
  max_cache_entries: 2048
  cache_warmup_enabled: true
  
  # âš¡ é¢„å–è®¾ç½®
  enable_prefetch: true
  prefetch_size: 4
  prefetch_threads: 2
  
  # ğŸ“Š å†…å­˜ç›‘æ§å’Œä¼˜åŒ–
  memory_monitoring_interval_ms: 100
  auto_memory_optimization: true
  memory_pressure_threshold: 0.85
  emergency_offload_threshold: 0.95
  
  # ğŸ”§ çº¿ç¨‹æ± é…ç½®
  memory_pool_threads: 4
  offload_threads: 2
  
  # ğŸ“ˆ æ€§èƒ½è°ƒä¼˜
  enable_async_offload: true
  enable_memory_prefusion: true
  enable_gradient_checkpointing: true

# MoRè·¯ç”±ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
mor:
  enable_mor: false  # æš‚æ—¶ç¦ç”¨ä»¥ç®€åŒ–æ¶æ„
  
# æ—¥å¿—é…ç½®
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/wicore.log"
  max_size_mb: 100
  backup_count: 5

# æ€§èƒ½ç›‘æ§
monitoring:
  enable_stats: true
  stats_interval: 60  # ç§’
  memory_monitoring: true
  
# APIé…ç½®
api:
  enable_cors: true
  cors_origins: ["*"]
  request_timeout: 300  # ç§’
  max_concurrent_requests: 10 